---
date: 2019-10-23
lastmod: Wednesday, February 5, 2020 at 7:47:41 PM
tags: Linux, RTSP, FFMPEG
---
 # 用FFMPEG录制RTSP

RTSP的URL地址格式是：

```
rtsp://$(IP):$(PORT)/user=$(USER)&password=$(PWD)&channel=$(Channel)&stream=$(Stream).sdp?real_stream
```

在确认能够收到流之后（如使用VLC），可以使用FFMPEG来录制流[^D358F1C01D59]

```bash
apt install FFmpeg -y

RTSP="rtsp://127.0.0.1:554/user=user&password=password&channel=Channel&stream=Stream.sdp?real_stream"

ffmpeg  -rtsp_transport tcp  -i $RTSP -vcodec  copy -r 1 -t 60  -y $(TZ=UTC-8 date +\%m\%d\%H\%M).mp4
```

上面的命令每次录制1分钟，以时间为文件名来保存。然后即可用cron来每分钟自动运行



[^D358F1C01D59]: [[使用 FFmpeg 远程读取 rtsp 监控视频流 - 木子]]
