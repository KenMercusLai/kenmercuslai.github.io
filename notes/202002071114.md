---
date: 2020-02-07
lastmod: Friday, February 7, 2020 at 11:26:49 AM
tags: [[[protocol, network, ospf]]]
---
# OSPF study notes

Packet type:
* Hello: discover and maintain neighbornood
* DBD: LSA header information, like a dictionary of LSAs
* LSR: request LSA
* LSU: update LSA (may contain several LSA)
* LS ACK: confirmation

LSA type:

|Type   | advertizer | scope  | content  |
|---|---|---|---|---|
| 1 | all routers running ospf | local area  | directly connected interfaces |  
| 2 | DR | local area  | mask of a MA network |
| 3 | ABR | AS | summary of LSA 1 & 2 |
| 4 | ABR in which area an ASBR exist | AS | where the ASBR is |
| 5 | ASBR | AS | external routes |
| 6 |   |   | Group Membership LSA |
| 7 | ASBR of NSSA | in the NSSA | external routes  |
| 8 | all routers in IPv6 (LSA 1 for ipv6) |   | 
| 9 | DR in IPv6 (LSA 2 for ipv6)  |   |  
| 10 |   |   | MPLS TE |
| 11 |   |   | MPLS TE |


Route types:

* O: LSA 1, 2
* O IA, LSA 3
* O E1, LSA 5 cost increase
* O E2, LSA 5 cost does NOT increase
* O N1, LSA 7 cost increase
* O N2, LSA 7 cost does NOT increase

Network types:
* BMA: hello timer 10s, DR will be selected
* P2P: hello timer 10s, DR will be selected
* P2MP
* P2MP NB
* NBMA: hello timer 30s
* Loopback

Area types:

| Type   |  characteristics  |
|---|---|
| stub | no LSA 4, 5. default route from ABR (LSA 3), no external routes allowed |
| totally stub | no LSA 3, 4, 5. default route from ABR (LSA 3), no external routes allowed |
| NSSA | no LSA 4, 5. no default route from ABR, external routes allowed |
| totally NSSA (Cisco Only) | no LSA 3, 4, 5. default route from ABR (LSA 3), external routes allowed |

neighbor relationship:

| Type   |  characteristics  |
|---|---|
| down | only in frame-relay |
| attempt | only in frame-relay |
| init | send hello packet |
| 2-way | elect DR & BDR |
| ex-start | send DBD packets, select master/slave (whose sequence number will be used) |
| exchange | exchange LSA information (LSR, LSU) |
| loading | respond ack, start SPF caculation |
| full | put best routes into routing table, neighbor connection finished |

DR & BDR election:

* priority, default is 1, 0 means the router doesnâ€™t attempt election
* Router ID, stuck in down if router ids are the same
