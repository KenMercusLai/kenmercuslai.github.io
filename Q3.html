<!doctype html>
<html>

<head>

  <title>
    
      People should pay for what they use | Idea Switching
    
  </title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8">

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">
  <!-- Use Atom -->
  <link type="application/atom+xml" rel="alternate" href="/rss-feed.xml" title="Idea Switching" />
  <!-- Use RSS-2.0 -->
  <!--<link href="/rss-feed.xml" type="application/rss+xml" rel="alternate" title="Idea Switching | Networking, Security, Automation & Development"/>
  //-->

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Quattrocento+Sans">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
    MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
      });
  </script>

  <!-- Google Analytics -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-112060364-1', 'auto');
  ga('send', 'pageview');
</script>


  <!-- Use Jekyll SEO plugin -->
  <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>People should pay for what they use | Idea Switching</title>
<meta name="generator" content="Jekyll v3.6.3" />
<meta property="og:title" content="People should pay for what they use" />
<meta name="author" content="Ken Lai" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A group of research institutions and hospitals are in a partnership to study 2 PBs of genomic data. The institute that owns the data stores it in an Amazon S3 bucket and updates it regularly. The institute would like to give all of the organizations in the partnership read access to the data. All members of the partnership are extremely cost-conscious, and the institute that owns the account with the S3 bucket is concerned about covering the costs for requests and data transfers from Amazon S3." />
<meta property="og:description" content="A group of research institutions and hospitals are in a partnership to study 2 PBs of genomic data. The institute that owns the data stores it in an Amazon S3 bucket and updates it regularly. The institute would like to give all of the organizations in the partnership read access to the data. All members of the partnership are extremely cost-conscious, and the institute that owns the account with the S3 bucket is concerned about covering the costs for requests and data transfers from Amazon S3." />
<meta property="og:site_name" content="Idea Switching" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-09-19T00:00:00+00:00" />
<script type="application/ld+json">
{"description":"A group of research institutions and hospitals are in a partnership to study 2 PBs of genomic data. The institute that owns the data stores it in an Amazon S3 bucket and updates it regularly. The institute would like to give all of the organizations in the partnership read access to the data. All members of the partnership are extremely cost-conscious, and the institute that owns the account with the S3 bucket is concerned about covering the costs for requests and data transfers from Amazon S3.","@type":"BlogPosting","headline":"People should pay for what they use","url":"/Q3","dateModified":"2019-09-19T00:00:00+00:00","datePublished":"2019-09-19T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/Q3"},"author":{"@type":"Person","name":"Ken Lai"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


</head>


<body>

  <div class="container">
    <header class="masthead">
  <h3 class="masthead-title">
    <a href="/">Idea Switching</a>
    <small class="masthead-subtitle">Networking, Security, Automation & Development</small>
    <div class="menu">
  <nav class="menu-content">
    
      <a href="/menu/about.html">About</a>
    
      <a href="/menu/writing.html">Writing</a>
    
      <a href="/menu/contact.html">Contact</a>
    
  </nav>
  <nav class="social-icons">
    
  
  
    <a href="https://www.github.com/lenpaul" target="_blank"><i class="fa fa-github" aria-hidden="true"></i></a>
  

  
  
    <a href="https://twitter.com/paululele" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  

  
  
    <a href="http://www.linkedin.com/in/lenpaul/" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
  

  
  
    <a href="mailto:l.nguyen.paul@gmail.com" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i></a>
  

  
  
    <a href="/feed.xml"><i class="fa fa-rss-square" aria-hidden="true"></i></a>
  

  </nav>
</div>

  </h3>
</header>


    <div class="post-container">
      <h1>
  People should pay for what they use
</h1>



<p>A group of research institutions and hospitals are in a partnership to study 2 PBs of genomic data. The institute that owns the data stores it in an Amazon S3 bucket and updates it regularly. The institute would like to give all of the organizations in the partnership read access to the data. All members of the partnership are extremely cost-conscious, and the institute that owns the account with the S3 bucket is concerned about covering the costs for requests and data transfers from Amazon S3.</p>

<!-- more -->

<p>Which solution allows for secure data-sharing without causing the institute that owns the bucket to assume all the costs for S3 requests and data transfers?</p>

<ol>
  <li>
    <p>Ensure that all organizations in the partnership have AWS accounts. In the account with the S3 bucket, create a cross-account role for each account in the partnership that allows read access to the data. Have the organizations assume and use that read role when accessing the data.</p>
  </li>
  <li>
    <p>Ensure that all organizations in the partnership have AWS accounts. Create a bucket policy on the bucket that owns the data. The policy should allow the accounts in the partnership read access to the bucket. Enable Requester Pays on the bucket. Have the organizations use their AWS credentials when accessing the data.</p>
  </li>
  <li>
    <p>Ensure that all organizations in the partnership have AWS accounts. Configure buckets in each of the accounts with a bucket policy that allows the institute that owns the data the ability to write to the bucket. Periodically sync the data from the institute’s account to the other organizations. Have the organizations use their AWS credentials when accessing the data using their accounts.</p>
  </li>
  <li>
    <p>Ensure that all organizations in the partnership have AWS accounts. In the account with the S3 bucket, create a cross-account role for each account in the partnership that allows read access to the data. Enable Requester Pays on the bucket. Have the organizations assume and use that read role when accessing the data.</p>
  </li>
</ol>

<hr />

<p>问题中说到了共享数据的时候，不希望对数据拥有者造成请求和数据传输上的费用。那么这就表明了需要请求者来支付相应的费用。从答案来看，2和4的Enable Requester Pays满足条件。</p>

<p>但问题的难点即在这里，2和4两个答案都提出了这样的解决方案：</p>

<ul>
  <li>所有的机构都有自己AWS账号</li>
  <li>允许其他机构对数据进行访问</li>
  <li>启用请求者支付</li>
  <li>用自己的账号访问数据</li>
</ul>

<p>这里最大的区别是在如何共享S3数据的方式上。2和4采用的方法都可以完成数据的共享，其方法分别是<a href="https://aws.amazon.com/premiumsupport/knowledge-center/cross-account-access-s3/">文档</a>中Resource-based Access和Cross-account IAM roles两种方式。但如果结合<a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/RequesterPaysBuckets.html">Requester Pays Buckets文档</a>中的这句话</p>

<blockquote>
  <p>When the requester assumes an AWS Identity and Access Management (IAM) role prior to making their request, the account to which the role belongs is charged for the request.</p>
</blockquote>

<p>来看，role所在的account会被用来支付费用。所以答案4中的共享方式，其他组织通过cross-account role来访问数据，由于这些role都是数据拥有者账号内创建的， 所以实际的费用支付者还是数据拥有者。这样就并不能实际达到Requester Pays的效果。</p>

<p>所以最后答案选2。</p>


<span class="post-date">
  Written on
  
  September
  19th,
  2019
  by
  
    Ken Lai
  
</span>

<div class="post-date">Feel free to share!</div>
  <div class="sharing-icons">
    <a href="https://twitter.com/intent/tweet?text=People should pay for what they use&amp;url=/Q3" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
    <a href="https://www.facebook.com/sharer/sharer.php?u=/Q3&amp;title=People should pay for what they use" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
  </div>
</div>


<div class="related">
  <h1 >You may also enjoy:</h1>
  
  <ul class="related-posts">
    
      
        
          <li>
            <h3>
              <a href="/Q59-SAA">
                Not perfect, but works at least
                <!--<img src="/images/">-->
                <!--<small>October 17, 2019</small>-->
              </a>
            </h3>
          </li>
          
        
      
        
          <li>
            <h3>
              <a href="/SAP%E8%80%83%E8%AF%95%E8%AE%A4%E8%AF%81%E5%BF%83%E5%BE%97">
                Amazon Solutions Architect - Professional 认证心得
                <!--<img src="/images/">-->
                <!--<small>October 5, 2019</small>-->
              </a>
            </h3>
          </li>
          
        
      
        
          <li>
            <h3>
              <a href="/Q5">
                Miss a step, miss the whole
                <!--<img src="/images/">-->
                <!--<small>September 26, 2019</small>-->
              </a>
            </h3>
          </li>
          
        
      
    
      
        
        
      
    
      
        
        
      
    
      
        
        
      
    
  </ul>
</div>




    </div>

    <footer class="footer">
  
  
  
    <a href="https://www.github.com/lenpaul" target="_blank"><i class="fa fa-github" aria-hidden="true"></i></a>
  

  
  
    <a href="https://twitter.com/paululele" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  

  
  
    <a href="http://www.linkedin.com/in/lenpaul/" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
  

  
  
    <a href="mailto:l.nguyen.paul@gmail.com" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i></a>
  

  
  
    <a href="/feed.xml"><i class="fa fa-rss-square" aria-hidden="true"></i></a>
  

  <div class="post-date"><a href="/menu/about.html">Idea Switching | Networking, Security, Automation & Development by Ken Lai</a></div>
</footer>

  </div>

</body>
</html>
